$(document).ready((function(){let t=JSON.parse(localStorage.getItem("favsItemsList"))||[];function i(t){const i=t.sizes&&t.sizes.length?`\n      <div class="side__item--size">\n        <span>Размер: </span>\n        <div class="side__item--select" data-id="${t.id}">\n          <div class="side__item--current">${t.selectedSize}</div>\n          <div class="side__item--options">\n            ${t.sizes.map((i=>`\n              <div class="side__item--option ${i===t.selectedSize?"active":""}">${i}</div>\n            `)).join("")}\n          </div>\n        </div>\n      </div>\n    `:"",e=`\n      <div class="side__item" data-id="${t.id}">\n        <div class="side__item--img">\n          <picture>\n            <img src="${t.img}" alt="product">\n          </picture>\n        </div>\n        <div class="side__item--info">\n          <span>${t.code}</span>\n          <b>${t.name}</b>\n          ${i}\n          <p>${t.price}</p>\n        </div>\n        <div class="side__del">\n          <img src="assets/img/icons/delete.svg" alt="icon">\n        </div>\n      </div>`;$(".favs__items").append(e)}function e(t){const i=t.find('input[type="radio"]:checked');if(i.length)return i.val();const e=t.find('input[type="radio"]').first();return e.length?e.val():null}function s(t){return t.find('input[type="radio"]').map((function(){return $(this).val()})).get()}t.forEach((t=>{i(t),$("#"+t.id).find(".add-to-fav").addClass("active")})),$(".fav-count-number").text(t.length),$(".add-to-fav").on("click",(function(e){e.preventDefault(),e.stopPropagation();const s=$(this).closest(".main-item"),n=s.attr("id"),d=t.findIndex((t=>t.id===n));if(-1!==d)t.splice(d,1),$(this).removeClass("active"),$('.side__item[data-id="'+n+'"]').remove();else{const e=function(t){return{id:t.attr("id"),img:t.find("picture img").attr("src"),name:t.find(".product0-name").text(),price:t.find(".product0-price").text(),code:t.find("span").first().text(),sizes:[],selectedSize:null}}(s);t.push(e),$(this).addClass("active"),i(e)}$(".fav-count-number").text(t.length),localStorage.setItem("favsItemsList",JSON.stringify(t))}));const n=$(".product__content"),d=n.attr("id");d&&t.find((t=>t.id===d))&&$(".product__fav").addClass("active"),$(".product__fav").on("click",(function(){const o=t.findIndex((t=>t.id===d));if(-1!==o)t.splice(o,1),$(this).removeClass("active"),$('.side__item[data-id="'+d+'"]').remove();else{const d={id:(c=n).attr("id"),img:c.find(".product__slider--item").first().find("picture img").attr("src")||"assets/img/noimage.jpg",name:c.find(".product__name").text().trim(),price:c.find(".product__price b").text().trim(),code:c.find(".product__art").text().replace("Артикул:","").trim(),sizes:s(c),selectedSize:e(c)};t.push(d),$(this).addClass("active"),i(d)}var c;$(".fav-count-number").text(t.length),localStorage.setItem("favsItemsList",JSON.stringify(t))})),$(document).on("click",".side__del",(function(){const i=$(this).closest(".side__item"),e=i.data("id");i.remove(),t=t.filter((t=>t.id!==e)),$(".fav-count-number").text(t.length),localStorage.setItem("favsItemsList",JSON.stringify(t)),$("#"+e).find(".add-to-fav").removeClass("active"),$(".product__fav").removeClass("active")})),$(document).on("click",".side__item--select, .side__item--current",(function(t){t.stopPropagation();const i=$(this).closest(".side__item--select");$(".side__item--options").not(i.find(".side__item--options")).hide(),i.find(".side__item--options").toggle()})),$(document).on("click",".side__item--size > span",(function(t){t.stopPropagation();const i=$(this).siblings(".side__item--select");$(".side__item--options").not(i.find(".side__item--options")).hide(),i.find(".side__item--options").toggle()})),$(document).on("click",".side__item--option",(function(t){t.stopPropagation();const i=$(this),e=i.text().trim(),s=i.closest(".side__item--select"),n=s.data("id");s.find(".side__item--option").removeClass("active"),i.addClass("active"),s.find(".side__item--current").text(e),s.find(".side__item--options").hide();let d=JSON.parse(localStorage.getItem("favsItemsList"))||[];const o=d.find((t=>t.id===n));o&&(o.selectedSize=e,localStorage.setItem("favsItemsList",JSON.stringify(d)))})),$(document).on("click",(function(){$(".side__item--options").hide()}))}));